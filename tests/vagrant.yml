---
# tests run by Vagrant
- hosts: all
  remote_user: vagrant
  become: true
  roles:
    - role: ../../
      install: true
      etckeeper_install_tig: true

- hosts: all
  remote_user: vagrant
  become: true
  pre_tasks:
    - name: Check if testfile exists.
      stat:
        path: "/etc/testfile"
      register: p
    - name: Create testfile, if it does not exist.
      file:
        path: /etc/.gitignore
        state: touch
      when: not p.stat.exists
  roles:
    - role: ../../
      install: false
